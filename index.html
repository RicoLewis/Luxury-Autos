<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <title>NT Luxury Autos</title>
  
    <!-- INCLUDING JQUERY-->
    <script src=
"https://code.jquery.com/jquery-3.5.1.js">
    </script>
	<script>
	const liste = [];
	var nom = [];
	var prix = [];
	liste.push(nom);
	liste.push(prix);
	$(document).ready(function () {
		$.getJSON("https://raw.githubusercontent.com/RicoLewis/Luxury-Autos/main/list.json", function (data) {
			var catalogue = '';
			var pattern = '';
			
	
			$.each(data, function (key, value) {
				$('#modeles').append("<option value=\""+value.nom+"\">");
				catalogue += '<tr' + ' id=\"' + value.nom +'\"' + '>';
				catalogue += '<td>' + value.nom + '</td>';
				catalogue += '<td>' + value.prix + '</td>';
				catalogue += '<td>' + value.page + '</td>';
				catalogue += '<td>' + value.cat + '</td>';
				catalogue += '</tr>';
				if (pattern == '') pattern += value.nom;
				else pattern += '|' + value.nom;
				liste[0].push(value.nom);
				liste[1].push(parseInt(value.prix));
			});
			$('#table').append(catalogue);
			$("#selecNom").attr('pattern', pattern);
		});
    });

	$(document).keypress(
	function(event){
		if (event.which == '13') {
			event.preventDefault();
		}
	});
	

	function rechercheNom() {
		var selecNom = document.getElementById('selecNom');
		var table = document.getElementById('table');
		var error = document.querySelector('.error');
	
		if (selecNom.validity.valid){
			error.innerHTML = "";
			error.className = "error";
			var y = 0;
			for (var i in liste[0]) {
				if (liste[0][i] != selecNom.value) {
					hideRow(liste[0][i]);
				}
				else showRow(liste[0][i]);
			}
		}
		else {
			error.innerHTML = "Saisie incorrecte!";
			error.className = "error active";
		}
		
	};
	
	function recherchePrix() {
		var min = document.getElementById('minimum');
		var max = document.getElementById('maximum');
		var table = document.getElementById('table');
		var error = document.querySelector('.error');
	
		if (min.validity.valid && max.validity.valid){
			error.innerHTML = "";
			error.className = "error";
			var minimum = parseInt(min.value);
			var maximum = parseInt(max.value);
			if (minimum >= maximum) {
				error.innerHTML = "Retourne en cours de Math!";
				error.className = "error active";
			}
			else {
				var y = 0;
				for (var i in liste[1]) {
				if (liste[1][i] <= min.value || liste[1][i] >= max.value) {
					hideRow(liste[0][i]);
				}
				else showRow(liste[0][i]);
			}
			}
		}
		else {
			error.innerHTML = "Saisie de prix incorrecte!";
			error.className = "error active";
		}
		
	};
	
	function hideRow(id) {
      var row = document.getElementById(id);
      row.style.display = 'none';
    }
	function showRow(id) {
      var row = document.getElementById(id);
      row.style.display = '';
    }

	</script>
</head>
  
<body>
	
	<label for="selecNom">Recherche : </label>
	<input type="text" name="voitures" list="modeles" id="selecNom" title="Veuillez choisir un nom de voiture" required>
	<button onclick="document.getElementById('selecNom').value = ''">üóëÔ∏è</button>
	<button onclick="rechercheNom()">Ok</button>
	<span class="error"></span>
	<br><br>
	<label for="minimum">Prix entre : </label>
	<input type="text" name="prixmin" list="prixmin" id="minimum" pattern="[0-9]{1,6}" size="4" required>
	<button onclick="document.getElementById('minimum').value = ''">üóëÔ∏è</button>
	<label for="minimum"> et : </label>
	<input type="text" name="prixmax" list="prixmax" id="maximum" pattern="[0-9]{1,6}" size="4" required>
	<button onclick="document.getElementById('maximum').value = ''">üóëÔ∏è</button>
	<button onclick="recherchePrix()">Ok</button>
	<span class="error"></span>
	
	
	<datalist id="modeles">
	</datalist>
	
	<datalist id="prixmin">
		<option value="0">
		<option value="5000">
		<option value="10000">
		<option value="25000">
		<option value="50000">
		<option value="75000">
		<option value="100000">
		<option value="150000">
		<option value="200000">
	</datalist>
	<datalist id="prixmax">
		<option value="10000">
		<option value="25000">
		<option value="50000">
		<option value="75000">
		<option value="100000">
		<option value="150000">
		<option value="200000">
		<option value="350000">
	</datalist>
	
	
	<br><br><br>
	
	<table id='table'>
    <tr>
      <th>Nom</th>
      <th>Prix</th>
      <th>Page</th>
      <th>Categorie</th>
    </tr>
      
</body>
  
</html>
